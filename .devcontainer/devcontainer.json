{
  "name": "TypeScript DevContainer",
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      "ENABLE_FISH_BANNER": "1"
    }
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "eamodio.gitlens",
        "ms-azuretools.vscode-docker",
        "redhat.vscode-yaml",
        "mikestead.dotenv",
        "streetsidesoftware.code-spell-checker",
        "github.copilot",
        "github.vscode-github-actions",
        "EditorConfig.EditorConfig",
        "ms-vscode.remote-containers"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "fish",
        "terminal.integrated.profiles.linux": {
          "fish": {
            "path": "/usr/bin/fish"
          }
        },
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.tabSize": 2,
        "files.trimTrailingWhitespace": true,
        "javascript.suggest.completeFunctionCalls": true,
        "typescript.suggest.completeFunctionCalls": true
      }
    }
  },
  "remoteUser": "vscode",
  "mounts": [
    {
      "source": "fish_history",
      "target": "/home/vscode/.local/share/fish",
      "type": "volume"
    },    {
      "source": "${localWorkspaceFolder}/shared",
      "target": "/workspace/shared",
      "type": "bind"
    }
  ],

  "postCreateCommand": "bash -lc 'sudo npm i -g pnpm; pnpm install; pnpm run prepare; if# [ -n \"$DOTFILES_REPO\" ]; then if [ ! -d \"$HOME/.dotfiles\" ]; then git clone \"$DOTFILES_REPO\" \"$HOME/.dotfiles\" || true; fi; if [ -f \"$HOME/.dotfiles/install.sh\" ]; then bash \"$HOME/.dotfiles/install.sh\"; fi; fi; node -e \"console.log(\\\"Hello from Dev Container\\\")\"; pnpm -v; pnpm exec playwright --version'",
  "containerEnv": {
"GIT_SSH_COMMAND": "ssh -o StrictHostKeyChecking=no",
    "PLAYWRIGHT_BROWSERS_PATH": "/ms-playwright",
    "DOTFILES_REPO": "https://github.com/milesburton/dotfiles"
  }
}
